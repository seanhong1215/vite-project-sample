import{_ as h,c as n,b as u,d as t,w as _,F as a,k as p,t as e,j as g,r as f,o as l}from"./index-dcf0a1b7.js";const m={data(){return{order:{user:{}},orderId:""}},methods:{getOrder(){const d=`https://vue3-course-api.hexschool.io/v2//api/seanhong/order/${this.orderId}`;this.isLoading=!0,this.$http.get(d).then(s=>{this.order=s.data.order,this.isLoading=!1}).catch(s=>{this.isLoading=!1,this.$httpMessageState(s.response,"錯誤訊息")})},payOrder(){const d=`https://vue3-course-api.hexschool.io/v2//api/seanhong/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(d).then(()=>{this.isLoading=!1,this.getOrder()}).catch(s=>{this.isLoading=!1,this.$httpMessageState(s.response,"錯誤訊息")})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},y={class:"my-5 row justify-content-center"},b={class:"table align-middle"},v=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),x={class:"text-end"},L=t("td",{colspan:"2",class:"text-end"},"總計",-1),k={class:"text-end"},O={class:"table"},I=t("th",{width:"100"},"Email",-1),$=t("th",null,"姓名",-1),w=t("th",null,"收件人電話",-1),S=t("th",null,"收件人地址",-1),B=t("th",null,"付款狀態",-1),C={key:0},M={key:1,class:"text-success"},N={key:0,class:"text-end"},V=t("button",{class:"btn btn-danger"},"確認付款去",-1),j=[V];function E(d,s,F,q,o,i){const c=f("Loading");return l(),n(a,null,[u(c,{active:d.isLoading,"z-index":1060},null,8,["active"]),t("div",y,[t("form",{class:"col-md-6",onSubmit:s[0]||(s[0]=_((...r)=>i.payOrder&&i.payOrder(...r),["prevent"]))},[t("table",b,[v,t("tbody",null,[(l(!0),n(a,null,p(o.order.products,r=>(l(),n("tr",{key:r.id},[t("td",null,e(r.product.title),1),t("td",null,e(r.qty)+"/"+e(r.product.unit),1),t("td",x,e(r.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[L,t("td",k,e(o.order.total),1)])])]),t("table",O,[t("tbody",null,[t("tr",null,[I,t("td",null,e(o.order.user.email),1)]),t("tr",null,[$,t("td",null,e(o.order.user.name),1)]),t("tr",null,[w,t("td",null,e(o.order.user.tel),1)]),t("tr",null,[S,t("td",null,e(o.order.user.address),1)]),t("tr",null,[B,t("td",null,[o.order.is_paid?(l(),n("span",M,"付款完成")):(l(),n("span",C,"尚未付款"))])])])]),o.order.is_paid===!1?(l(),n("div",N,j)):g("",!0)],32)])],64)}const D=h(m,[["render",E]]);export{D as default};
